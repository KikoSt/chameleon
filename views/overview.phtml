<?php include('navigation.inc.php');?>

<?php
    if(!is_array($this->previews) || count($this->previews) === 0):
?>
    <p class="notification"><?php echo $this->message; ?></p>
<?php
    else:
    // it is actually valid html to have input elements without a form,
    // so this is how we store the advertiser and company ID since it's
    // the same for all templates!!!
?>
<input type="hidden" id="advertiserId" name="advertiserId" value="<?php echo $this->advertiserId; ?>">
<input type="hidden" id="companyId"    name="companyId"    value="<?php echo $this->companyId; ?>">
<div class="container-fluid margin-left-150">
    <div id="overviewView">
    <?php
        foreach($this->previews as $preview):
    ?>
            <div id="template_<?php echo $preview->templateId; ?>" class="row template">
                <div class="thumbnail thumbnail-half col-md-2">
                    <div class="row templatePreviewRow">
                        <div class="overviewTitle">Template</div>
                        <div>
                            <a href="<?php echo BASE_DIR;?>/index.php?page=editor&amp;templateId=<?php echo $preview->templateId; ?>">
                                <img class="thumbnail-preview" src="<?php echo $preview->filePath; ?>"
                                       onmouseover="showtrail('<?php echo $preview->filePath; ?>', 'Preview',
                                       <?php echo $preview->bannerDimension->width; ?>,
                                       <?php echo $preview->bannerDimension->height; ?>);"
                                       onmouseout="hidetrail();"
                                       alt="thumbnail preview template <?php echo $preview->templateId; ?> (<?php echo $preview->bannerDimension->width; ?>x<?php echo $preview->bannerDimension->height; ?>)"
                                />
                            </a>
                        </div>
                    </div>
                    <?php include('overviewComponents/facts.inc.php'); ?>
                </div>
                <?php
                    include('overviewComponents/category.inc.php');
                    include('overviewComponents/examples.inc.php');
                    include('overviewComponents/action.inc.php');
                ?>
            </div>
            <div class="modal fade" id="categorySelect-<?php echo $preview->templateId; ?>" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header imageTitle">
                            <button type="button" class="close" data-dismiss="modal">
                                <span class="glyphicon glyphicon-remove-circle cursor-pointer"></span>
                            </button>
                            <h4 class="modal-title" id="myModalLabel_<?php echo $preview->templateId; ?>">Select categories:</h4>
                        </div>
                        <div class="modal-body">
                            <?php include('overviewComponents/categoryAlignment.inc.php'); ?>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Modal -->
            <input type="hidden" name="templateId"   value="<?php echo $preview->templateId; ?>">
            <input type="hidden" name="templateName" value="<?php echo $preview->templateName; ?>">

    <?php
        endforeach;
        endif;
    ?>

    </div>
</div>

<script type="text/JavaScript" src="js/overview.js"></script>
